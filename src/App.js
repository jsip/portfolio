import { Html, Stars } from "@react-three/drei";
import { Canvas } from "@react-three/fiber";
import React, { Suspense, useRef } from "react";
import Model from "./Model";
import Overlay from "./Overlay";

export default function App() {
  const overlay = useRef();
  const caption = useRef();
  const scroll = useRef(0);
  return (
    <>
      <Canvas
        shadows
        onCreated={(state) => state.events.connect(overlay.current)}
        raycaster={{
          computeOffsets: ({ clientX, clientY }) => ({
            offsetX: clientX,
            offsetY: clientY,
          }),
        }}
      >
        <ambientLight intensity={0.75} />
        <Stars
          radius={100}
          depth={50}
          count={5000}
          factor={4}
          saturation={0}
          fade
        />
        <Suspense fallback={null}>
          <Html
            center={true}
            position={[-5, 1, 0]}
            style={{ textAlign: "center" }}
          >
            <a
              className="elsewhere"
              rel="tipsy noreferrer"
              title="Jean-Simon Royer - jsimonroyer@gmail.com"
              href="mailto:jsimonroyer@gmail.com"
              target="_blank"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 18 18"
                fill="none"
                role="img"
                className="icon "
              >
                <path
                  d="M9 10.1962C8.46375 10.1962 7.9275 10.0815 7.42875 9.85125L0 6.42225V15C0 15.8287 0.67125 16.5 1.5 16.5H16.5C17.3288 16.5 18 15.8287 18 15V6.42225L10.5712 9.85125C10.0725 10.0815 9.53625 10.1962 9 10.1962ZM16.5 1.5H1.5C0.67125 1.5 0 2.17125 0 3V4.77L8.05725 8.4885C8.6565 8.7645 9.34425 8.76525 9.9435 8.4885L18 4.77V3C18 2.17125 17.3288 1.5 16.5 1.5Z"
                  fill="black"
                ></path>
              </svg>
            </a>{" "}
            <a
              className="elsewhere"
              rel="tipsy noreferrer"
              title="jsip - GitHub"
              data-track-social="github"
              data-social-url="https://github.com/jsip"
              data-owner-id="1829106"
              target="_blank"
              href="https://github.com/jsip"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
                fill="none"
                role="img"
                className="icon "
              >
                <path
                  d="M4.24323 12.5803C4.18966 12.6406 4.1227 12.6305 4.04234 12.5502C3.95529 12.4765 3.94189 12.4129 4.00216 12.3593C4.05573 12.299 4.1227 12.3091 4.20306 12.3894C4.28341 12.4631 4.29681 12.5267 4.24323 12.5803ZM3.82136 11.9676C3.88163 12.0479 3.88163 12.1115 3.82136 12.1584C3.76779 12.1986 3.71087 12.1752 3.6506 12.0881C3.59033 12.001 3.59033 11.9408 3.6506 11.9073C3.71087 11.8604 3.76779 11.8805 3.82136 11.9676ZM3.20864 11.3649C3.17515 11.4118 3.13163 11.4185 3.07806 11.385C3.01109 11.3515 2.98765 11.3113 3.00774 11.2644C3.02783 11.231 3.07136 11.2243 3.13832 11.2443C3.20529 11.2778 3.22872 11.318 3.20864 11.3649ZM3.52002 11.7064C3.47984 11.7533 3.42627 11.7432 3.35931 11.6763C3.29904 11.6026 3.29234 11.549 3.33922 11.5156C3.37939 11.4754 3.43297 11.4854 3.49993 11.5457C3.5602 11.6193 3.56689 11.6729 3.52002 11.7064ZM4.81578 12.8314C4.78899 12.9118 4.72538 12.9318 4.62493 12.8917C4.51109 12.8649 4.46756 12.8147 4.49435 12.741C4.52114 12.6673 4.58475 12.6439 4.6852 12.6707C4.79234 12.7042 4.83587 12.7577 4.81578 12.8314ZM5.44859 12.8816C5.44859 12.9553 5.39502 12.9921 5.28788 12.9921C5.17404 13.0055 5.11712 12.9687 5.11712 12.8816C5.11712 12.808 5.17069 12.7711 5.27783 12.7711C5.39167 12.7577 5.44859 12.7946 5.44859 12.8816ZM6.03118 12.7812C6.04457 12.8481 5.9977 12.895 5.89056 12.9218C5.78341 12.9486 5.72314 12.9218 5.70975 12.8414C5.69636 12.7611 5.74323 12.7109 5.85038 12.6908C5.95752 12.6774 6.01779 12.7075 6.03118 12.7812ZM15.7142 3.1785V12.8214C15.7142 13.6182 15.4313 14.2996 14.8654 14.8654C14.2996 15.4313 13.6182 15.7142 12.8214 15.7142H10.5714C10.4642 15.7142 10.3822 15.7109 10.3253 15.7042C10.2683 15.6975 10.2031 15.6807 10.1294 15.6539C10.0557 15.6272 10.0022 15.5786 9.96868 15.5083C9.9352 15.438 9.91846 15.3459 9.91846 15.2321V12.8314C9.91846 12.1818 9.74435 11.7064 9.39614 11.4051C9.77783 11.3649 10.121 11.3046 10.4257 11.2243C10.7304 11.1439 11.0451 11.0133 11.3699 10.8325C11.6947 10.6517 11.9659 10.4291 12.1835 10.1646C12.4012 9.90004 12.5786 9.54848 12.7159 9.10986C12.8532 8.67125 12.9218 8.16734 12.9218 7.59814C12.9218 6.78788 12.6573 6.09814 12.1283 5.52895C12.376 4.91957 12.3493 4.23654 12.0479 3.47984C11.8604 3.41957 11.5892 3.4564 11.2343 3.59033C10.8794 3.72426 10.5714 3.87158 10.3102 4.0323L9.9285 4.27337C9.30573 4.09926 8.66288 4.01221 7.99993 4.01221C7.33698 4.01221 6.69413 4.09926 6.07136 4.27337C5.96422 4.19971 5.82192 4.10931 5.64446 4.00216C5.46701 3.89502 5.18743 3.76611 4.80573 3.61544C4.42404 3.46477 4.13609 3.41957 3.94189 3.47984C3.64725 4.23654 3.62381 4.91957 3.87158 5.52895C3.34256 6.09814 3.07806 6.78788 3.07806 7.59814C3.07806 8.16734 3.14669 8.66957 3.28397 9.10484C3.42125 9.54011 3.59703 9.89167 3.81131 10.1595C4.0256 10.4274 4.29513 10.6517 4.61991 10.8325C4.94468 11.0133 5.25942 11.1439 5.5641 11.2243C5.86879 11.3046 6.21198 11.3649 6.59368 11.4051C6.32582 11.6461 6.16176 11.991 6.10149 12.4397C5.96087 12.5066 5.8102 12.5568 5.64948 12.5903C5.48877 12.6238 5.29792 12.6406 5.07694 12.6406C4.85596 12.6406 4.63665 12.5686 4.41902 12.4246C4.20138 12.2806 4.01556 12.0714 3.86154 11.7968C3.73431 11.5825 3.57192 11.4084 3.37437 11.2745C3.17683 11.1406 3.01109 11.0602 2.87716 11.0334L2.67627 11.0033C2.53564 11.0033 2.43855 11.0183 2.38497 11.0485C2.3314 11.0786 2.31466 11.1171 2.33475 11.164C2.35484 11.2109 2.38497 11.2577 2.42515 11.3046C2.46533 11.3515 2.50886 11.3917 2.55573 11.4252L2.62605 11.4754C2.77337 11.5423 2.91902 11.6696 3.06299 11.8571C3.20696 12.0446 3.31243 12.2153 3.37939 12.3693L3.47984 12.6004C3.56689 12.8548 3.71422 13.0608 3.92181 13.2181C4.12939 13.3755 4.35372 13.4759 4.5948 13.5195C4.83587 13.563 5.06857 13.5864 5.2929 13.5898C5.51723 13.5931 5.70306 13.5814 5.85038 13.5546L6.0814 13.5144C6.0814 13.7689 6.08308 14.1138 6.08643 14.549C6.08977 14.9843 6.09145 15.212 6.09145 15.2321C6.09145 15.3794 6.05462 15.4916 5.98096 15.5686C5.9073 15.6456 5.83364 15.6891 5.75997 15.6991C5.68631 15.7092 5.57582 15.7142 5.4285 15.7142H3.1785C2.38163 15.7142 1.70027 15.4313 1.13442 14.8654C0.568569 14.2996 0.285645 13.6182 0.285645 12.8214V3.1785C0.285645 2.38163 0.568569 1.70027 1.13442 1.13442C1.70027 0.568569 2.38163 0.285645 3.1785 0.285645H12.8214C13.6182 0.285645 14.2996 0.568569 14.8654 1.13442C15.4313 1.70027 15.7142 2.38163 15.7142 3.1785Z"
                  fill="black"
                ></path>
              </svg>
            </a>{" "}
            <a
              className="elsewhere"
              rel="tipsy noreferrer"
              title="Jean-Simon Royer - LinkedIn"
              data-track-social="linkedin"
              data-social-url="https://www.linkedin.com/in/jean-simon-royer-453a38196/"
              data-owner-id="1829106"
              target="_blank"
              href="https://www.linkedin.com/in/jean-simon-royer-453a38196/"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 18 18"
                fill="none"
                role="img"
                className="icon "
              >
                <g clip-path="url(#clip0)">
                  <path
                    d="M16.6707 0H1.32996C0.595385 0 0 0.577223 0 1.28966V16.7098C0 17.4223 0.595595 18 1.32996 18H16.6707C17.4051 18 17.9998 17.4219 17.9998 16.7098V1.28966C17.9998 0.577432 17.4051 0 16.6707 0ZM5.45702 15.0672H2.73738V6.94044H5.45702V15.0672ZM4.09748 5.83019H4.07919C3.16717 5.83019 2.57597 5.20647 2.57597 4.42561C2.57597 3.62902 3.18454 3.02221 4.11463 3.02221C5.04481 3.02221 5.61697 3.62885 5.63505 4.42561C5.63505 5.20664 5.04502 5.83019 4.09748 5.83019ZM15.2605 15.0672H12.5418V10.7191C12.5418 9.62656 12.1478 8.88106 11.1646 8.88106C10.4125 8.88106 9.966 9.38401 9.76994 9.86958C9.69729 10.043 9.67929 10.2856 9.67929 10.5278V15.0671H6.96103C6.96103 15.0671 6.99661 7.70251 6.96103 6.94032H9.67971V8.09246C10.0406 7.53884 10.6856 6.74911 12.1293 6.74911C13.9188 6.74911 15.2605 7.90996 15.2605 10.4073V15.0672ZM9.66214 8.11828C9.66678 8.11067 9.67327 8.1015 9.67971 8.09259V8.11828H9.66214Z"
                    fill="black"
                  ></path>
                </g>
              </svg>
            </a>
            <h1>Qu√©bec</h1>
            <h1>20 ans</h1>
          </Html>
          <Model scroll={scroll} />
        </Suspense>
      </Canvas>
      <Overlay ref={overlay} caption={caption} scroll={scroll} />
    </>
  );
}
